<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/paper-toast/paper-toast.html">
<link rel="import" href="/bower_components/core-item/core-item.html">
<link rel="import" href="/bower_components/polymer-filters/polymer-filters.html">

<!--<link rel="import" href="/bower_components/baasic-login/baasic-login.html">-->
<link rel="import" href="/layouts/sidebar-layout.html">
<link rel="import" href="/pages/app-ajax.html">

<polymer-element name="employees-page" router="{{router}}" attributes="employees">
    <template>
        <sidebar-layout selected="employee">
            <div class="title">Employees</div>
            <div>
                <ul><b>Esajeesolutions Employees List</b></ul>
            </div>
            <table style=" text-align: center; 
                   font-style: italic;
                   display: inline-block; 
                   resize: both; 
                   border: 1px solid #008;
                   border-collapse: collapse; 
                   width: 80%"> 
                <tr>
                    <th>Employee Id</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Company Name</th>
                    <th>Registration Date</th>
                    <!--<th>FMD</th>-->
                    <th>MainID</th>
                    <th>
                <core-item icon="add-circle" title="Add-Employee" name="insert"><a is="pushstate-anchor" href="/#/employees/update/"></a></core-item>
                <!--<paper-button id="insert-button" on-click="{{insert}}" raised>Insert</paper-button>-->
                </th></tr>
                <template repeat="{{employee in employees}}">
                    <tr>
                        <td>{{employee.EmployeeID}}</td>
                        <td>{{employee.FirstName}}</td>
                        <td>{{employee.LastName}}</td>
                        <td>{{employee.CompanyName}}</td>
                        <td>{{employee.RegistrationDate | date('yyyy/MM/dd')}}</td>
                        <!--<td>{{employee.FMD}}</td>-->
                        <td>{{employee.MainID}}</td>
                        <td>
                    <core-item icon="arrow-forward" title="Update-Employee" name="update"><a is="pushstate-anchor" href="/#/employees/update/{{employee.EmployeeID}}"></a></core-item>  
                    <!--&firstname={{employee.FirstName}}&lastname={{employee.LastName}}&companyname={{employee.CompanyName}}&registrationdate={{employee.RegistrationDate}}&mainid={{employee.MainID}}-->
                    <!--<paper-button id="update-button" on-click="update" width="20px" height="10px" raised>Update</paper-button></td>-->
                    </tr>
                </template>
            </table>
            <div>
                <!--<input type="hidden" name="action" id="action">-->
                <paper-toast id="toast1" text="" on-click="{{dataResponse(el)}}" opened="false"></paper-toast>

            </div>
            <app-ajax id="ajax"
                      url="/api/employee"
                      method="GET"
                      on-core-response="{{employeeResponse}}"
                      content-type="application/json"
                      handleAs="json">
            </app-ajax>
        </sidebar-layout>
    </template>
    <script>
        Polymer('employees-page', {
            ready : function(){
//                console.log("Employees Test");
                this.employees = this.employees || [];
                this.$.ajax.go();
            }, 
            employeeResponse: function()
            {
//                console.log(this.$.ajax.response.data[0]);
                if(this.$.ajax.response.status==true)
                {
                    this.employees = this.$.ajax.response.data;
//                    this.employees=employees;
                }
                else
                {
                    this.$.toast1.text="There is an Error on Employees Request/Response";
                    this.$.toast1.opened="true";
                }
            },
            dataResponse : function(el)
            {
                el.show();
            } 
            
        });
    </script>
</polymer-element>